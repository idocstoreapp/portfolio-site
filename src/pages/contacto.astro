---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="Contacto | Dise√±ador Web y Programador | Jonathan Guarirapa"
  description="¬øNecesitas dise√±o web, dise√±o de p√°ginas web, apps web, dise√±o de marca, men√∫s QR o sistemas de gesti√≥n? Cont√°ctame para discutir tu proyecto y recibir una cotizaci√≥n personalizada. Respuesta garantizada en menos de 24 horas."
>
  <!-- Structured Data for Contact -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "ContactPage",
    "mainEntity": {
      "@type": "Person",
      "name": "Jonathan Guarirapa",
      "email": "jona.develp@gmail.com",
      "jobTitle": "Dise√±ador Web y Programador",
      "description": "Especialista en dise√±o web, dise√±o de p√°ginas web, apps web, dise√±o de marca, logos, men√∫s QR para restaurantes y sistemas de gesti√≥n"
    }
  })} />

  <!-- Hero: fondo claro + acento teal (alineado al wizard) -->
  <section class="relative py-16 md:py-24 bg-gradient-to-b from-white to-teal-50/50 overflow-hidden">
    <div class="absolute top-10 right-10 w-48 h-48 bg-teal-200/40 rounded-full blur-3xl"></div>
    <div class="absolute bottom-10 left-10 w-32 h-32 bg-teal-100/60 rounded-full blur-2xl"></div>
    <div class="relative z-10 max-w-4xl mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-6xl font-bold mb-4 text-gray-800">
        Trabajemos <span class="text-teal-600">juntos</span>
      </h1>
      <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
        ¬øTienes un proyecto en mente? Hablemos sobre c√≥mo puedo ayudarte a hacerlo realidad.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="#formulario" class="inline-flex items-center justify-center gap-2 px-6 py-3.5 text-base font-semibold text-white rounded-xl shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500" style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">
          Enviar mensaje
        </a>
        <a href="/proyectos" class="inline-flex items-center justify-center gap-2 px-6 py-3.5 text-base font-semibold text-teal-600 bg-white border-2 border-teal-500 rounded-xl hover:bg-teal-50 transition-colors">
          Ver mis trabajos
        </a>
      </div>
    </div>
  </section>

  <!-- Formulario + info: fondo claro, cards con borde y sombra suave -->
  <section id="formulario" class="py-16 md:py-20 bg-gray-50/80">
    <div class="max-w-5xl mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-3">
          Env√≠ame un <span class="text-teal-600">mensaje</span>
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Completa el formulario y me pondr√© en contacto contigo en menos de 24 horas.
        </p>
      </div>

      <div class="grid lg:grid-cols-2 gap-10">
        <!-- Formulario -->
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 md:p-8">
          <form class="space-y-5" id="contact-form">
            <div class="grid sm:grid-cols-2 gap-5">
              <div>
                <label for="nombre" class="block text-sm font-semibold text-gray-700 mb-1.5">Nombre *</label>
                <input type="text" id="nombre" name="nombre" required
                  class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors"
                  placeholder="Tu nombre completo" />
              </div>
              <div>
                <label for="email" class="block text-sm font-semibold text-gray-700 mb-1.5">Email *</label>
                <input type="email" id="email" name="email" required
                  class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors"
                  placeholder="tu@email.com" />
              </div>
            </div>
            <div>
              <label for="telefono" class="block text-sm font-semibold text-gray-700 mb-1.5">Tel√©fono</label>
              <input type="tel" id="telefono" name="telefono"
                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors"
                placeholder="+56 9 6261 4851" />
            </div>
            <div>
              <label for="empresa" class="block text-sm font-semibold text-gray-700 mb-1.5">Empresa</label>
              <input type="text" id="empresa" name="empresa"
                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors"
                placeholder="Nombre de tu empresa" />
            </div>
            <div>
              <label for="servicio" class="block text-sm font-semibold text-gray-700 mb-1.5">Tipo de servicio *</label>
              <select id="servicio" name="servicio" required
                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors">
                <option value="">Selecciona un servicio</option>
                <option value="desarrollo-web">Desarrollo Web</option>
                <option value="diseno-ui-ux">Dise√±o UI/UX</option>
                <option value="optimizacion">Optimizaci√≥n</option>
                <option value="landing-page">Landing Page</option>
                <option value="aplicacion-web">Aplicaci√≥n Web</option>
                <option value="consulta">Consulta</option>
                <option value="otro">Otro</option>
              </select>
            </div>
            <div>
              <label for="presupuesto" class="block text-sm font-semibold text-gray-700 mb-1.5">Presupuesto aproximado</label>
              <select id="presupuesto" name="presupuesto"
                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors">
                <option value="">Selecciona un rango</option>
                <option value="500-1000">$500 - $1,000</option>
                <option value="1000-2500">$1,000 - $2,500</option>
                <option value="2500-5000">$2,500 - $5,000</option>
                <option value="5000+">$5,000+</option>
                <option value="por-definir">Por definir</option>
              </select>
            </div>
            <div>
              <label for="mensaje" class="block text-sm font-semibold text-gray-700 mb-1.5">Mensaje *</label>
              <textarea id="mensaje" name="mensaje" rows="5" required
                class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-colors resize-none"
                placeholder="Cu√©ntame sobre tu proyecto, objetivos y plazos..."></textarea>
            </div>
            <div class="flex items-start gap-3">
              <input type="checkbox" id="privacidad" name="privacidad" required
                class="mt-1 w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500" />
              <label for="privacidad" class="text-sm text-gray-600">
                Acepto la <a href="#" class="text-teal-600 font-medium hover:underline">pol√≠tica de privacidad</a> y el tratamiento de mis datos para responder mi consulta.
              </label>
            </div>
            <button type="submit"
              class="w-full px-6 py-3.5 text-base font-semibold text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 flex items-center justify-center gap-2"
              style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">
              <span>Enviar mensaje</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
            </button>
          </form>
        </div>

        <!-- Info contacto + FAQ -->
        <div class="space-y-6">
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 md:p-8">
            <h3 class="text-xl font-bold text-gray-800 mb-5">Otras formas de contacto</h3>
            <div class="space-y-5">
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 text-2xl" style="background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%); color: white;">üìß</div>
                <div>
                  <h4 class="font-semibold text-gray-800">Email</h4>
                  <a href="mailto:jona.develp@gmail.com" class="text-teal-600 hover:underline font-medium">jona.develp@gmail.com</a>
                  <p class="text-sm text-gray-500 mt-0.5">Respuesta en menos de 24 horas</p>
                </div>
              </div>
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 text-2xl bg-green-500 text-white">üì±</div>
                <div>
                  <h4 class="font-semibold text-gray-800">WhatsApp</h4>
                  <a href="https://wa.me/56962614851" target="_blank" rel="noopener noreferrer" class="text-teal-600 hover:underline font-medium">+56 9 6261 4851</a>
                  <p class="text-sm text-gray-500 mt-0.5">Disponible de 9 AM a 6 PM</p>
                </div>
              </div>
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 text-2xl" style="background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%); color: white;">üíº</div>
                <div>
                  <h4 class="font-semibold text-gray-800">LinkedIn</h4>
                  <p class="text-gray-600">linkedin.com/in/jonathan</p>
                  <p class="text-sm text-gray-500 mt-0.5">Conectemos profesionalmente</p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 md:p-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Tiempo de respuesta</h3>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-teal-500"></span> Email: menos de 24 h</li>
              <li class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-green-500"></span> WhatsApp: inmediato (horario laboral)</li>
              <li class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-amber-400"></span> LinkedIn: 1‚Äì2 d√≠as h√°biles</li>
            </ul>
          </div>
          <div class="bg-white rounded-2xl shadow-lg border border-gray-100 p-6 md:p-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Preguntas frecuentes</h3>
            <div class="space-y-4">
              <div>
                <h4 class="font-semibold text-gray-800 mb-1">¬øCu√°nto tiempo toma un proyecto?</h4>
                <p class="text-sm text-gray-600">Landing: ~1 semana. Sitios completos: 2‚Äì3 semanas. Aplicaciones: 4‚Äì6 semanas.</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-800 mb-1">¬øOfreces soporte post-entrega?</h4>
                <p class="text-sm text-gray-600">S√≠, 30 d√≠as de soporte gratuito en todos los proyectos.</p>
              </div>
              <div>
                <h4 class="font-semibold text-gray-800 mb-1">¬øTrabajas con empresas internacionales?</h4>
                <p class="text-sm text-gray-600">S√≠, trabajo con clientes de todo el mundo.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Proceso: fondo blanco, n√∫meros teal -->
  <section class="py-16 md:py-20 bg-white">
    <div class="max-w-5xl mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-3">
          ¬øQu√© pasa <span class="text-teal-600">despu√©s?</span>
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Mi proceso paso a paso para el √©xito de tu proyecto.
        </p>
      </div>
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="text-center">
          <div class="w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 text-white font-bold text-xl" style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">1</div>
          <h3 class="font-bold text-gray-800 mb-2">Recibo tu mensaje</h3>
          <p class="text-sm text-gray-600">Te respondo en menos de 24 horas.</p>
        </div>
        <div class="text-center">
          <div class="w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 text-white font-bold text-xl" style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">2</div>
          <h3 class="font-bold text-gray-800 mb-2">Consulta inicial</h3>
          <p class="text-sm text-gray-600">Hablamos de tu proyecto y objetivos.</p>
        </div>
        <div class="text-center">
          <div class="w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 text-white font-bold text-xl" style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">3</div>
          <h3 class="font-bold text-gray-800 mb-2">Propuesta detallada</h3>
          <p class="text-sm text-gray-600">Timeline, costos y especificaciones.</p>
        </div>
        <div class="text-center">
          <div class="w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-4 text-white font-bold text-xl" style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">4</div>
          <h3 class="font-bold text-gray-800 mb-2">¬°Empezamos!</h3>
          <p class="text-sm text-gray-600">Desarrollo con comunicaci√≥n constante.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA final: fondo teal suave -->
  <section class="py-16 md:py-20 bg-teal-50">
    <div class="max-w-3xl mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-3">
        ¬øListo para <span class="text-teal-600">empezar?</span>
      </h2>
      <p class="text-lg text-gray-600 mb-8">
        Env√≠a tu mensaje y comencemos a trabajar en tu proyecto.
      </p>
      <a href="#formulario" class="inline-flex items-center justify-center gap-2 px-8 py-4 text-base font-semibold text-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500" style="background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);">
        Enviar mensaje ahora
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
      </a>
    </div>
  </section>
</Layout>

<script>
  // Form handling with Google Sheets integration
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form');
    
    if (form) {
      form.addEventListener('submit', async function(e) {
      e.preventDefault();
        console.log('Formulario enviado!');
        
        // Get form data
        const formData = new FormData(form);
        const data = Object.fromEntries(formData);
        console.log('Datos del formulario:', data);
        
        // Simple validation
        if (!data.nombre || !data.email || !data.servicio || !data.mensaje) {
          showNotification('Por favor, completa todos los campos obligatorios.', 'error');
          return;
        }
        
        // Email validation
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(data.email)) {
          showNotification('Por favor, ingresa un email v√°lido.', 'error');
          return;
        }
        
        // Prepare data for Google Sheets
        const sheetData = {
          name: data.nombre,
          email: data.email,
          phone: data.telefono || '',
          message: data.mensaje,
          subject: `${data.servicio} - ${data.empresa || 'Sin empresa'} - Presupuesto: ${data.presupuesto || 'Por definir'}`
        };
        
        // Show loading state
        const submitButton = form.querySelector('button[type="submit"]');
        const originalText = submitButton.innerHTML;
        
        submitButton.innerHTML = `
          <span class="flex items-center justify-center gap-2">
            <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Enviando...
          </span>
        `;
        
        submitButton.disabled = true;
        
        try {
          console.log('Enviando datos a Google Sheets:', sheetData);
          
          // Send to Google Sheets
          const response = await fetch('https://script.google.com/macros/s/AKfycbyV5zNy1wMuzvabrVtOfm4_gSDb8-7DrLVOJmOt9Nqw45UhxsPn0ux4btvmAzTwVV9U/exec', {
          method: 'POST',
          mode: 'no-cors',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(sheetData)
          });
          
          console.log('Respuesta recibida:', response);
          
          // Show success message
          showNotification('¬°Mensaje enviado con √©xito! Te contactar√© pronto.', 'success');
        form.reset();
          
        } catch (error) {
          console.error('Error:', error);
          showNotification('Hubo un error al enviar el mensaje. Por favor, int√©ntalo de nuevo.', 'error');
      } finally {
          // Reset button
          submitButton.innerHTML = originalText;
          submitButton.disabled = false;
        }
      });
    }
    
    // Notification system
    function showNotification(message, type = 'info') {
      // Remove existing notifications
      const existingNotification = document.querySelector('.notification');
      if (existingNotification) {
        existingNotification.remove();
      }
      
      // Create notification
      const notification = document.createElement('div');
      notification.className = `notification fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transform transition-all duration-300 ${
        type === 'success' ? 'bg-green-500 text-white' : 
        type === 'error' ? 'bg-red-500 text-white' : 
        'bg-blue-500 text-white'
      }`;
      
      notification.innerHTML = `
        <div class="flex items-center gap-3">
          <div class="flex-shrink-0">
            ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium">${message}</p>
          </div>
          <button onclick="this.parentElement.parentElement.remove()" class="flex-shrink-0 text-white hover:text-gray-200">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        if (notification.parentElement) {
          notification.remove();
        }
      }, 5000);
      }
    });
  </script>