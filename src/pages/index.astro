---
import Layout from '../layouts/Layout.astro';
import HeroPremium from '../components/HeroPremium.astro';
import ProjectsCarousel from '../components/ProjectsCarousel.astro';
import SuccessCaseCard from '../components/SuccessCaseCard.astro';
import TestimonialCardPremium from '../components/TestimonialCardPremium.astro';
import { getCollection } from 'astro:content';

// Get featured projects for the homepage
const allProjects = await getCollection('projects');
const featuredProjects = allProjects
  .filter(project => project.data.featured)
  .sort((a, b) => b.data.order - a.data.order)
  .slice(0, 4);

// Projects for carousel - using JPG images for carousel
const carouselProjects = [
  {
    title: 'Muebler√≠a Casa Blanca',
    image: '/images/webs/muebleria1.jpeg',
    category: 'web' as const,
    liveUrl: 'https://mueblericacasablanca.cl',
    githubUrl: 'https://github.com/idocstoreapp/redise-o-muebleriacasablanca',
    slug: 'muebleria-casa-blanca'
  },
  {
    title: 'Kubica Mobiliario',
    image: '/images/webs/mobiliario.jpeg',
    category: 'web' as const,
    liveUrl: 'https://kubicamobiliario.cl',
    githubUrl: 'https://github.com/idocstoreapp/nuevo-proyecto',
    slug: 'kubica-mobiliario'
  },
  {
    title: 'Gourmet √Årabe - Men√∫ QR',
    image: '/images/menuqr/mockup-arabe.png',
    category: 'menu-qr' as const,
    liveUrl: 'https://sistema-restaurant-seven.vercel.app/',
    githubUrl: 'https://github.com/idocstoreapp/sistema-restaurant',
    slug: 'gourmet-arabe'
  },
  {
    title: 'Sistema de Reparaciones',
    image: '/images/sistemas/idocstore1.png',
    category: 'sistema' as const,
    liveUrl: 'https://sistema-reparaciones.vercel.app',
    githubUrl: 'https://github.com/idocstoreapp/sistema-reparaciones',
    slug: 'sistema-reparaciones'
  },
  {
    title: 'Muebler√≠a Cotizador',
    image: '/images/sistemas/cotizador1.png',
    category: 'sistema' as const,
    liveUrl: '#',
    githubUrl: '#',
    slug: 'muebleria-cotizador'
  }
];

// Testimonials data
const testimonials = [
  {
    name: "Jos√© Perez",
    role: "Director",
    company: "NubeX",
    rating: 5,
    text: "Gracias a Jonathan, nuestra plataforma aument√≥ un 40% en usuarios activos. El sistema es robusto y f√°cil de usar.",
    avatar: "üë®‚Äçüíº"
  },
  {
    name: "Ana Torres",
    role: "CEO",
    company: "El Gabriel",
    rating: 5,
    text: "Excelente trabajo en nuestra tienda online. Las ventas aumentaron significativamente y la experiencia de usuario es impecable.",
    avatar: "üë©‚Äçüíº"
  },
  {
    name: "In√©s Traba",
    role: "CEO",
    company: "Mi Life",
    rating: 5,
    text: "Problema: Mi App ten√≠a baja retenci√≥n. Soluci√≥n: Plataforma completa que aument√≥ usuarios activos en 50%.",
    avatar: "üë©‚Äçüíª"
  },
  {
    name: "Anna Tellez",
    role: "Fundadora",
    company: "Bloom",
    rating: 5,
    text: "Sistema de automatizaci√≥n que redujo costos en 30%. Muy profesional y resultados medibles.",
    avatar: "üë©‚Äçüé®"
  }
];

// Success cases data
const successCases = [
  {
    icon: "‚òÅÔ∏è",
    title: "Plataforma Cloud",
    problem: "Gesti√≥n desactualizada en App m√≥vil",
    solution: "Sistema completo moderno con API",
    result: "+40% usuarios activos",
    gradient: "primary" as const
  },
  {
    icon: "üõí",
    title: "E-commerce",
    problem: "Baja conversi√≥n en tienda online",
    solution: "Redise√±o UX/UI + optimizaci√≥n",
    result: "+25% ventas",
    gradient: "secondary" as const
  },
  {
    icon: "üìä",
    title: "Sistema de Gesti√≥n",
    problem: "Procesos manuales ineficientes",
    solution: "Automatizaci√≥n completa",
    result: "-30% costos operativos",
    gradient: "tertiary" as const
  }
];
---

<Layout 
  title="Dise√±ador Web y Programador | Jonathan Guarirapa - Desarrollo Web, Apps y Automatizaciones"
  description="Dise√±ador web profesional especializado en dise√±o de p√°ginas web, apps web, dise√±o de marca, logos, men√∫s QR para restaurantes y sistemas de gesti√≥n. Desarrollo web con resultados medibles."
  image="/jonadevel.jpg"
>
  <!-- Structured Data for Homepage -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Jonathan Guarirapa - Dise√±ador Web y Programador",
    "url": Astro.url.origin,
    "description": "Dise√±ador web profesional especializado en dise√±o de p√°ginas web, apps web, dise√±o de marca, logos, men√∫s QR para restaurantes y sistemas de gesti√≥n",
    "author": {
      "@type": "Person",
      "name": "Jonathan Guarirapa",
      "email": "jona.develp@gmail.com"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": Astro.url.origin + "/proyectos?q={search_term_string}"
      },
      "query-input": "required name=search_term_string"
    },
    "mainEntity": {
      "@type": "Person",
      "name": "Jonathan Guarirapa",
      "jobTitle": "Dise√±ador Web y Programador",
      "description": "Especialista en dise√±o de p√°ginas web, dise√±o de apps web, dise√±o de marca, dise√±o de logos, creaci√≥n de im√°genes, men√∫s QR para restaurantes y sistemas de gesti√≥n",
      "knowsAbout": [
        "Dise√±o Web",
        "Dise√±o de P√°ginas Web",
        "Dise√±o de Apps Web",
        "Dise√±o de Marca",
        "Dise√±o de Logo",
        "Creaci√≥n de Im√°genes",
        "Men√∫s QR para Restaurantes",
        "Men√∫ QR",
        "Sistemas de Gesti√≥n",
        "Programaci√≥n",
        "Desarrollo Web",
        "Aplicaciones Web",
        "Automatizaciones"
      ],
      "offers": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Dise√±o de P√°ginas Web",
            "description": "Dise√±o profesional de p√°ginas web modernas y responsivas"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Dise√±o de Apps Web",
            "description": "Desarrollo de aplicaciones web personalizadas"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Dise√±o de Marca y Logo",
            "description": "Creaci√≥n de identidad visual y dise√±o de logos profesionales"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Men√∫s QR para Restaurantes",
            "description": "Sistemas de men√∫s digitales con c√≥digo QR para restaurantes"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Sistemas de Gesti√≥n",
            "description": "Desarrollo de sistemas de gesti√≥n personalizados para empresas"
          }
        }
      ]
    }
  })} />

  <!-- Hero Section Premium -->
  <HeroPremium 
    title="Plataformas digitales que convierten crecimiento en resultados reales"
    subtitle="Dise√±amos sistemas web que optimizan procesos y generan ventas."
    primaryCta={{ text: "Solicitar diagn√≥stico", href: "/contacto" }}
    secondaryCta={{ text: "Ver casos reales", href: "/projects" }}
    rating={{ score: "4.9/5.0", count: "250+ Rese√±as en Google" }}
    mockupImage={featuredProjects[0]?.data.cover}
  />

  <!-- Featured Projects Section - Carrusel -->
  <section class="projects-section-premium">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Transformaciones que generan valor</h2>
        <p class="section-subtitle">Cada proyecto es una decisi√≥n estrat√©gica. Cada soluci√≥n, una mejora medible.</p>
      </div>

      <ProjectsCarousel projects={carouselProjects} />
    </div>
  </section>

  <!-- Success Cases Section -->
  <section class="success-cases-section">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Casos de √âxito</h2>
        <p class="section-subtitle">Resultados reales de mis clientes</p>
      </div>

      <div class="success-cases-grid">
        {successCases.map((caseItem) => (
          <SuccessCaseCard
            icon={caseItem.icon}
            title={caseItem.title}
            problem={caseItem.problem}
            solution={caseItem.solution}
            result={caseItem.result}
            gradient={caseItem.gradient}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="testimonials-section">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Lo que dicen mis clientes</h2>
        <p class="section-subtitle">Testimonios reales de proyectos exitosos</p>
      </div>

      <div class="testimonials-grid-premium">
        {testimonials.map((testimonial) => (
          <TestimonialCardPremium
            name={testimonial.name}
            role={testimonial.role}
            company={testimonial.company}
            text={testimonial.text}
            rating={testimonial.rating}
            avatar={testimonial.avatar}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section-premium">
    <div class="section-container">
      <div class="cta-content">
        <h2 class="cta-title">¬øListo para impulsar tu negocio?</h2>
        <p class="cta-subtitle">
          Trabajemos juntos para crear soluciones digitales que generen resultados reales
        </p>
        <div class="cta-buttons">
          <a href="/contacto" class="btn-cta-primary">
            Solicitar Propuesta
          </a>
          <a href="/projects" class="btn-cta-secondary">
            Ver Todos los Proyectos
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Projects Section Premium */
  .projects-section-premium {
    padding: 6rem 0;
    background: var(--bg-primary);
  }
  
  /* Background de escritorio para la secci√≥n de proyectos */
  @media (min-width: 1024px) {
    .projects-section-premium {
      background-image: url('/images/background-escritorio.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: scroll;
      position: relative;
    }
    
    .projects-section-premium::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0);
      z-index: 1;
    }
    
    .projects-section-premium .section-container {
      position: relative;
      z-index: 2;
    }
  }
  
  main {
    padding: 0;
    marging: 0;
  }
  .section-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .section-header {
    text-align: center;
    margin-bottom: 4rem;
  }
  
  /* Reducir espacio entre t√≠tulo y carrusel en m√≥vil */
  @media (max-width: 767px) {
    .projects-section-premium .section-header {
      margin-bottom: 1.5rem;
    }
  }
  
  .section-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 800;
    color: var(--text-primary);
    margin: 0 0 1rem 0;
    letter-spacing: -0.03em;
  }
  
  .section-subtitle {
    font-size: clamp(1rem, 2vw, 1.25rem);
    color: var(--text-muted);
    margin: 0;
  }
  
  .projects-grid-premium {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  
  @media (min-width: 768px) {
    .projects-grid-premium {
      grid-template-columns: repeat(2, 1fr);
      gap: 2.5rem;
    }
  }
  
  /* Success Cases Section */
  .success-cases-section {
    padding: 6rem 0;
    background: var(--bg-primary);
    background-color: var(--color-elephant-white);
    background-image: url('/images/background-hero.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    position: relative;
  }
  
  .success-cases-section::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(15, 23, 42, 0);
    z-index: 1;
  }
  
  .success-cases-section .section-container {
    position: relative;
    z-index: 2;
  }
  
  .success-cases-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  
  @media (min-width: 768px) {
    .success-cases-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2.5rem;
    }
  }
  
  /* Testimonials Section */
  .testimonials-section {
    padding: 6rem 0;
    background: var(--bg-primary);
    background-color: var(--color-elephant-white);
  }
  
  .testimonials-grid-premium {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  
  @media (min-width: 768px) {
    .testimonials-grid-premium {
      grid-template-columns: repeat(2, 1fr);
      gap: 2.5rem;
    }
  }
  
  @media (min-width: 1024px) {
    .testimonials-grid-premium {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  /* CTA Section Premium */
  .cta-section-premium {
    padding: 8rem 0;
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
    position: relative;
    overflow: hidden;
  }
  
  .cta-section-premium::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      circle at 50% 50%,
      rgba(88, 101, 242, 0.1) 0%,
      transparent 70%
    );
    pointer-events: none;
  }
  
  .cta-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  
  .cta-title {
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 800;
    color: var(--text-primary);
    margin: 0 0 1rem 0;
    letter-spacing: -0.03em;
  }
  
  .cta-subtitle {
    font-size: clamp(1rem, 2vw, 1.25rem);
    color: var(--text-secondary);
    margin: 0 0 2.5rem 0;
    line-height: 1.6;
  }
  
  .cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .btn-cta-primary,
  .btn-cta-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 1rem 2.5rem;
    border-radius: var(--radius-lg);
    font-weight: 600;
    font-size: 1.125rem;
    text-decoration: none;
    transition: all var(--norm) var(--ease);
  }
  
  .btn-cta-primary {
    background: var(--grad-primary);
    color: #FFFFFF;
    box-shadow: var(--shadow-lg), var(--shadow-glow-primary);
  }
  
  .btn-cta-primary:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-xl), var(--shadow-glow-primary);
  }
  
  .btn-cta-secondary {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
    border: 1px solid rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
  }
  
  .btn-cta-secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-3px);
  }
  
  /* Mobile optimizations */
  @media (max-width: 768px) {
    .projects-section-premium,
    .success-cases-section,
    .testimonials-section {
      padding: 4rem 0;
    }
    
    .cta-section-premium {
      padding: 6rem 0;
    }
    
    .section-header {
      margin-top:-2.5rem; 
      margin-bottom:-7rem;
      padding-bottom:-6rem;
    }
  }
</style>

<script>
  // Smooth scroll animations
  document.addEventListener('DOMContentLoaded', function() {
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, observerOptions);
    
    // Observe all cards
    document.querySelectorAll('.project-card-premium, .success-case-card, .testimonial-card-premium').forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(card);
    });
  });
</script>
